{"version":3,"sources":["functions/color_vending/1/index.js","App.js","AppWrapper.js","index.js"],"names":["ethers","require","uniswap_contract_abi","uniswap_contract_address","didExecuteIntent","web3context","intendedColrAmount","a","exchangeContract","Contract","library","getEthToTokenOutputPrice","exchangeRateWei","console","log","toString","exchangeRateEth","Math","ceil","toFixed","iface","Interface","deadline","Date","getTime","calldata","functions","ethToTokenSwapOutput","encode","signer","getSigner","tx","from","to","data","value","utils","parseEther","sendTransaction","ColorVendingV1","props","context","parseInt","intentData","document","title","get_exchange_rate_and_swap","etherscanLink","target","href","Component","App","useWeb3Context","useEffect","setFirstValidConnector","active","error","path","intent","version","componentData","connectors","MetaMask","InjectedConnector","Connectors","supportedNetworks","AppWrapper","window","ethereum","autoRefreshOnNetworkChange","search","location","params","URLSearchParams","get","libraryName","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.bd9b8d42.chunk.js","sourcesContent":["import React, { Component } from 'react'\n\nconst ethers = require('ethers');\n\nvar uniswap_contract_abi = [{\"name\":\"TokenPurchase\",\"inputs\":[{\"type\":\"address\",\"name\":\"buyer\",\"indexed\":true},{\"type\":\"uint256\",\"name\":\"eth_sold\",\"indexed\":true},{\"type\":\"uint256\",\"name\":\"tokens_bought\",\"indexed\":true}],\"type\":\"event\",\"anonymous\":false},{\"name\":\"EthPurchase\",\"inputs\":[{\"type\":\"address\",\"name\":\"buyer\",\"indexed\":true},{\"type\":\"uint256\",\"name\":\"tokens_sold\",\"indexed\":true},{\"type\":\"uint256\",\"name\":\"eth_bought\",\"indexed\":true}],\"type\":\"event\",\"anonymous\":false},{\"name\":\"AddLiquidity\",\"inputs\":[{\"type\":\"address\",\"name\":\"provider\",\"indexed\":true},{\"type\":\"uint256\",\"name\":\"eth_amount\",\"indexed\":true},{\"type\":\"uint256\",\"name\":\"token_amount\",\"indexed\":true}],\"anonymous\":false,\"type\":\"event\"},{\"name\":\"RemoveLiquidity\",\"inputs\":[{\"type\":\"address\",\"name\":\"provider\",\"indexed\":true},{\"type\":\"uint256\",\"name\":\"eth_amount\",\"indexed\":true},{\"type\":\"uint256\",\"name\":\"token_amount\",\"indexed\":true}],\"anonymous\":false,\"type\":\"event\"},{\"name\":\"Transfer\",\"inputs\":[{\"type\":\"address\",\"name\":\"_from\",\"indexed\":true},{\"type\":\"address\",\"name\":\"_to\",\"indexed\":true},{\"type\":\"uint256\",\"name\":\"_value\",\"indexed\":false}],\"anonymous\":false,\"type\":\"event\"},{\"name\":\"Approval\",\"inputs\":[{\"type\":\"address\",\"name\":\"_owner\",\"indexed\":true},{\"type\":\"address\",\"name\":\"_spender\",\"indexed\":true},{\"type\":\"uint256\",\"name\":\"_value\",\"indexed\":false}],\"anonymous\":false,\"type\":\"event\"},{\"name\":\"setup\",\"outputs\":[],\"inputs\":[{\"type\":\"address\",\"name\":\"token_addr\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":175875},{\"name\":\"addLiquidity\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"min_liquidity\"},{\"type\":\"uint256\",\"name\":\"max_tokens\"},{\"type\":\"uint256\",\"name\":\"deadline\"}],\"constant\":false,\"payable\":true,\"type\":\"function\",\"gas\":82616},{\"name\":\"removeLiquidity\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"},{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"amount\"},{\"type\":\"uint256\",\"name\":\"min_eth\"},{\"type\":\"uint256\",\"name\":\"min_tokens\"},{\"type\":\"uint256\",\"name\":\"deadline\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":116814},{\"name\":\"__default__\",\"outputs\":[],\"inputs\":[],\"constant\":false,\"payable\":true,\"type\":\"function\"},{\"name\":\"ethToTokenSwapInput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"min_tokens\"},{\"type\":\"uint256\",\"name\":\"deadline\"}],\"constant\":false,\"payable\":true,\"type\":\"function\",\"gas\":12757},{\"name\":\"ethToTokenTransferInput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"min_tokens\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"recipient\"}],\"constant\":false,\"payable\":true,\"type\":\"function\",\"gas\":12965},{\"name\":\"ethToTokenSwapOutput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_bought\"},{\"type\":\"uint256\",\"name\":\"deadline\"}],\"constant\":false,\"payable\":true,\"type\":\"function\",\"gas\":50463},{\"name\":\"ethToTokenTransferOutput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_bought\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"recipient\"}],\"constant\":false,\"payable\":true,\"type\":\"function\",\"gas\":50671},{\"name\":\"tokenToEthSwapInput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_sold\"},{\"type\":\"uint256\",\"name\":\"min_eth\"},{\"type\":\"uint256\",\"name\":\"deadline\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":47503},{\"name\":\"tokenToEthTransferInput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_sold\"},{\"type\":\"uint256\",\"name\":\"min_eth\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"recipient\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":47712},{\"name\":\"tokenToEthSwapOutput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"eth_bought\"},{\"type\":\"uint256\",\"name\":\"max_tokens\"},{\"type\":\"uint256\",\"name\":\"deadline\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":50175},{\"name\":\"tokenToEthTransferOutput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"eth_bought\"},{\"type\":\"uint256\",\"name\":\"max_tokens\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"recipient\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":50384},{\"name\":\"tokenToTokenSwapInput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_sold\"},{\"type\":\"uint256\",\"name\":\"min_tokens_bought\"},{\"type\":\"uint256\",\"name\":\"min_eth_bought\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"token_addr\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":51007},{\"name\":\"tokenToTokenTransferInput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_sold\"},{\"type\":\"uint256\",\"name\":\"min_tokens_bought\"},{\"type\":\"uint256\",\"name\":\"min_eth_bought\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"recipient\"},{\"type\":\"address\",\"name\":\"token_addr\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":51098},{\"name\":\"tokenToTokenSwapOutput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_bought\"},{\"type\":\"uint256\",\"name\":\"max_tokens_sold\"},{\"type\":\"uint256\",\"name\":\"max_eth_sold\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"token_addr\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":54928},{\"name\":\"tokenToTokenTransferOutput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_bought\"},{\"type\":\"uint256\",\"name\":\"max_tokens_sold\"},{\"type\":\"uint256\",\"name\":\"max_eth_sold\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"recipient\"},{\"type\":\"address\",\"name\":\"token_addr\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":55019},{\"name\":\"tokenToExchangeSwapInput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_sold\"},{\"type\":\"uint256\",\"name\":\"min_tokens_bought\"},{\"type\":\"uint256\",\"name\":\"min_eth_bought\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"exchange_addr\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":49342},{\"name\":\"tokenToExchangeTransferInput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_sold\"},{\"type\":\"uint256\",\"name\":\"min_tokens_bought\"},{\"type\":\"uint256\",\"name\":\"min_eth_bought\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"recipient\"},{\"type\":\"address\",\"name\":\"exchange_addr\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":49532},{\"name\":\"tokenToExchangeSwapOutput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_bought\"},{\"type\":\"uint256\",\"name\":\"max_tokens_sold\"},{\"type\":\"uint256\",\"name\":\"max_eth_sold\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"exchange_addr\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":53233},{\"name\":\"tokenToExchangeTransferOutput\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_bought\"},{\"type\":\"uint256\",\"name\":\"max_tokens_sold\"},{\"type\":\"uint256\",\"name\":\"max_eth_sold\"},{\"type\":\"uint256\",\"name\":\"deadline\"},{\"type\":\"address\",\"name\":\"recipient\"},{\"type\":\"address\",\"name\":\"exchange_addr\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":53423},{\"name\":\"getEthToTokenInputPrice\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"eth_sold\"}],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":5542},{\"name\":\"getEthToTokenOutputPrice\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_bought\"}],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":6872},{\"name\":\"getTokenToEthInputPrice\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"tokens_sold\"}],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":5637},{\"name\":\"getTokenToEthOutputPrice\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"eth_bought\"}],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":6897},{\"name\":\"tokenAddress\",\"outputs\":[{\"type\":\"address\",\"name\":\"out\"}],\"inputs\":[],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":1413},{\"name\":\"factoryAddress\",\"outputs\":[{\"type\":\"address\",\"name\":\"out\"}],\"inputs\":[],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":1443},{\"name\":\"balanceOf\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"address\",\"name\":\"_owner\"}],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":1645},{\"name\":\"transfer\",\"outputs\":[{\"type\":\"bool\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"address\",\"name\":\"_to\"},{\"type\":\"uint256\",\"name\":\"_value\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":75034},{\"name\":\"transferFrom\",\"outputs\":[{\"type\":\"bool\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"address\",\"name\":\"_from\"},{\"type\":\"address\",\"name\":\"_to\"},{\"type\":\"uint256\",\"name\":\"_value\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":110907},{\"name\":\"approve\",\"outputs\":[{\"type\":\"bool\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"address\",\"name\":\"_spender\"},{\"type\":\"uint256\",\"name\":\"_value\"}],\"constant\":false,\"payable\":false,\"type\":\"function\",\"gas\":38769},{\"name\":\"allowance\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[{\"type\":\"address\",\"name\":\"_owner\"},{\"type\":\"address\",\"name\":\"_spender\"}],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":1925},{\"name\":\"name\",\"outputs\":[{\"type\":\"bytes32\",\"name\":\"out\"}],\"inputs\":[],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":1623},{\"name\":\"symbol\",\"outputs\":[{\"type\":\"bytes32\",\"name\":\"out\"}],\"inputs\":[],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":1653},{\"name\":\"decimals\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":1683},{\"name\":\"totalSupply\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"out\"}],\"inputs\":[],\"constant\":true,\"payable\":false,\"type\":\"function\",\"gas\":1713}]\nvar uniswap_contract_address = '0x3F0c63dA66457dedc2677BEF6bbdd457BA7A3C0b'\nvar uniswap_exchange_colr_url = \"https://uniswap.exchange/swap/0x3867ef780a3afcf1201ef4f2acc6a46e3bd1eb88\"\nvar eth_gas_station_url = \"https://ethgasstation.info/\"\n\n// only initiate the transaction once\nvar didExecuteIntent = false;\n\nvar web3context = null;\n\nvar intendedColrAmount = 0\n\nasync function get_exchange_rate_and_swap() {\n\tvar exchangeContract = new ethers.Contract(uniswap_contract_address, uniswap_contract_abi, web3context.library)\n\n\t// get the exchange rate for the desired COLR amount\n\tvar exchangeRateWei = await exchangeContract.getEthToTokenOutputPrice(intendedColrAmount)\n\n\tconsole.log(\"Exchange Rate (WEI): \" + exchangeRateWei.toString())\n\n\t// convert to ETH\n\tvar exchangeRateEth = (exchangeRateWei / 10 ** 18)\n\tvar factor = 0.0001\n\n\tconsole.log(\"Exchange Rate (ETH): \" + exchangeRateEth)\n\n\texchangeRateEth = Math.ceil(exchangeRateEth / factor) * factor\n\n\texchangeRateEth = exchangeRateEth.toFixed(4)\n\n\tconsole.log(\"Exchange Rate (Rounded): \" + exchangeRateEth)\n\t\n\t// get contract interface\n\tvar iface = new ethers.Interface(uniswap_contract_abi)\t\n\n\t// take current time in seconds + 15 minutes\n\tvar deadline = Math.ceil(new Date().getTime() / 1000) + 900;\t\n\t\n\t// generate the call data for the exchange rate -- amount of eth we'll need\n\tvar calldata = iface.functions.ethToTokenSwapOutput.encode(\n\t\t[intendedColrAmount, deadline]\n\t)\n\n\tconsole.log(\"Calldata: \" + calldata)\n\n\t// get the signer\n\tvar signer = web3context.library.getSigner();\n\n\tconst tx = {\n\t\tfrom: \"0x9AF481276b075e036BC23E887a8Bd275e69Ef74C\",\n\t\tto: uniswap_contract_address,\n\t\tdata: calldata,\n\t\tvalue: ethers.utils.parseEther(exchangeRateEth.toString()),\n\t}\n\n\t// send the transaction\n\tsigner.sendTransaction(tx)\n}\n\nconst MAX_ALLOWED_COLR_PURCHASE = 250;\n\nclass ColorVendingV1 extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\t// set the web3 context\n\t\tweb3context = this.props.props.context\t\n\n\t\t// set the intended colr purchase amount\n\t\tintendedColrAmount = parseInt(this.props.props.intentData.value)\n\n\t\tdocument.title += \" $COLR Vending Machine\"\n\t}\n\n\tcomponentDidMount() {\n\t\tif (didExecuteIntent === false) {\t\t\t\n\t\t\tdidExecuteIntent = true;\n\n\t\t\tif (intendedColrAmount <= MAX_ALLOWED_COLR_PURCHASE) {\n\t\t\t\tget_exchange_rate_and_swap()\t\t\n\t\t\t}\n\t\t} \n\t}\n\n\trender() {\n\t\tvar etherscanLink = \"https://etherscan.io/address/\" + uniswap_contract_address\n    \treturn (<div>\n    \t\t<p>🌈 Thank you for using the $COLR vending machine!</p>\n    \t\t<p>💰 You have initiated a transaction for {intendedColrAmount} $COLR.</p>    \t\t\n    \t\t<p>🦄 You can verify the uniswap exchange address: <b><a target=\"_blank\" href={etherscanLink}>https://etherscan.io/address/{uniswap_contract_address}</a></b></p>\n    \t\t<p>🦄 Or exchange directly at: <b><a target=\"_blank\" href={uniswap_exchange_colr_url}>{uniswap_exchange_colr_url}</a></b></p>\n    \t\t<p>⛽️ Please be sure to check all inputs and gas before submitting your transaction. Recommended gas prices can be found at <b><a target=\"_blank\" href={eth_gas_station_url}>{eth_gas_station_url}</a></b></p>\n    \t\t<p>🗒️ Documentation on using $COLR can be found <a target=\"_blank\" href=\"https://www.cryptovoxels.com/docs/colr\">here</a>.</p>\n    \t\t<p>💥 Close this window to return to Cryptovoxels.</p>\n    \t\t</div>\n\t\t)\n\t}\n}\n\nexport default ColorVendingV1","import React, { useEffect } from 'react'\nimport { useWeb3Context } from 'web3-react'\n\nimport ColorVendingV1 from './functions/color_vending/1/index'\n\nexport default function App (props) {\n  // get the web3 context\n  const context = useWeb3Context()\n \n  useEffect(() => {\n    context.setFirstValidConnector(['MetaMask'])\n  }, [])\n \n  if (!context.active && !context.error) {\n    // loading\n    return <p>loading</p>\n  } else if (context.error) {\n    // error\n    return <p>{context.error}</p>\n  } else {  \n\t\tvar intentType = props.intentData.intent;\n\t\tvar intentVersion = props.intentData.version;\n    var path = intentType + intentVersion\n\n    var componentData = {\n      \"intentData\" : props.intentData,\n      \"context\" : context\n    }\n\n    if (path === \"colr-vending1\") {\n      return <ColorVendingV1 props={componentData}/>\n    } else {\n      return <div/>\n    }\n  }\n}","import App from \"./App\";\nimport React, { Component } from 'react';\nimport Web3Provider from 'web3-react'\nimport { Connectors } from 'web3-react'\n\nconst { InjectedConnector } = Connectors\nconst MetaMask = new InjectedConnector({ supportedNetworks: [1, 4] })\nconst connectors = { MetaMask }\n\nconst intentData = {}\n\nclass AppWrapper extends Component {\n\tconstructor() {\n\t\tsuper()\n\n\t\t// resolve warning\n\t\twindow.ethereum.autoRefreshOnNetworkChange = false\n\n\t\t// grab the input params from the URL request\n\t\tlet search = window.location.search;\n\t\t\n\t\tlet params = new URLSearchParams(search);\t\t\n\n\t\tintentData['intent'] = params.get('intent');\n\t\tintentData['value'] = params.get('value');\n\t\tintentData['version'] = params.get('version');\n\t}\n\t\n\trender() {\n    \treturn (\n    \t\t<Web3Provider connectors={connectors} libraryName=\"ethers.js\">\n    \t\t\t<App intentData={intentData}/>\n    \t\t</Web3Provider>\n    \t)\n  \t}\n}\nexport default AppWrapper;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport AppWrapper from \"./AppWrapper\";\n\nReactDOM.render(<AppWrapper />, document.getElementById(\"root\"));"],"sourceRoot":""}